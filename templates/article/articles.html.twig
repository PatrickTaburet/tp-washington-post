{% extends 'base.html.twig' %}

{% block title %}Article list{% endblock %}

{% block body %}
<div class="galleryHeader">
  <h1 class="text-center mt-4">ARTICLES :</h1>
  <a href="{{ path('article_create')}}" class=" btn btn-info globalButton"> Add an article </a> 
</div>
<div class="container ">
    <table class="table table-dark table-striped ">
      <thead>
        <tr>
          <th scope="col">ID</th>
          <th scope="col">Title</th>
          <th scope="col">Content</th>
          <th scope="col">Picture</th>
          <th scope="col">Author</th>
          <th scope="col">Date</th>
          <th scope="col">Action</th>
        </tr>
      </thead>
      {% for article in articles %}
      <tbody class="table table-striped ">
        <tr>
          <th>{{article.id}}</th>
          <td>{{article.title}}</td>
          <td class="articleContent">{{article.content}}</td>
          <td><img src="{{ vich_uploader_asset(article, 'imageFile')}}" alt="article_picture"></td>
          <td>{{article.user.name}} {{article.user.firstname}}</td>
          <td>{{article.updatedAt|date('F j, Y, g:i a')}}</td>
           {% if (is_granted('ROLE_EDITOR') and article.user == app.user)%}
          <td>
            <a href="{{ path('article_update', {'id': article.id})}}">Update</a>
            <a href="{{ path('article_delete', {'id': article.id})}}">Delete</a>
          </td>
           {% elseif is_granted('ROLE_ADMIN') %}
          <td>
            <a href="{{ path('article_update', {'id': article.id})}}">Update</a>
            <a href="{{ path('article_delete', {'id': article.id})}}">Delete</a>
          </td>
          {% endif %}
        </tr>
      {% endfor %}
      </tbody>
    </table>
</div>


{% endblock %}
